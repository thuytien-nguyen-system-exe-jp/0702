/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/route";
exports.ids = ["app/api/auth/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_thuytien_nguyen_SYSTEM_EXE_Desktop_0702_vietnamese_ecommerce_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/route.ts */ \"(rsc)/./src/app/api/auth/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/route\",\n        pathname: \"/api/auth\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\thuytien.nguyen.SYSTEM-EXE\\\\Desktop\\\\0702\\\\vietnamese-ecommerce\\\\src\\\\app\\\\api\\\\auth\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_thuytien_nguyen_SYSTEM_EXE_Desktop_0702_vietnamese_ecommerce_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN0aHV5dGllbi5uZ3V5ZW4uU1lTVEVNLUVYRSU1Q0Rlc2t0b3AlNUMwNzAyJTVDdmlldG5hbWVzZS1lY29tbWVyY2UlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q3RodXl0aWVuLm5ndXllbi5TWVNURU0tRVhFJTVDRGVza3RvcCU1QzA3MDIlNUN2aWV0bmFtZXNlLWVjb21tZXJjZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDeUQ7QUFDdEk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHRodXl0aWVuLm5ndXllbi5TWVNURU0tRVhFXFxcXERlc2t0b3BcXFxcMDcwMlxcXFx2aWV0bmFtZXNlLWVjb21tZXJjZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHRodXl0aWVuLm5ndXllbi5TWVNURU0tRVhFXFxcXERlc2t0b3BcXFxcMDcwMlxcXFx2aWV0bmFtZXNlLWVjb21tZXJjZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/auth/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/auth/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n\n// バリデーションスキーマ\nconst loginSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_3__.string().email('有効なメールアドレスを入力してください'),\n    password: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, 'パスワードを入力してください')\n});\nconst registerSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_3__.string().email('有効なメールアドレスを入力してください'),\n    password: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(8, 'パスワードは8文字以上である必要があります'),\n    firstName: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, '名前を入力してください'),\n    lastName: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, '姓を入力してください'),\n    preferredLanguage: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        'ja',\n        'vi'\n    ]).optional()\n});\n// ログイン\nasync function POST(request) {\n    try {\n        const url = new URL(request.url);\n        const action = url.searchParams.get('action');\n        // セキュリティヘッダーを設定\n        const headers = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getSecurityHeaders)();\n        if (action === 'login') {\n            return await handleLogin(request, headers);\n        } else if (action === 'register') {\n            return await handleRegister(request, headers);\n        } else if (action === 'logout') {\n            return await handleLogout(request, headers);\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '無効なアクションです'\n            }, {\n                status: 400,\n                headers\n            });\n        }\n    } catch (error) {\n        console.error('Auth API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'サーバーエラーが発生しました'\n        }, {\n            status: 500,\n            headers: (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getSecurityHeaders)()\n        });\n    }\n}\n// ログイン処理\nasync function handleLogin(request, headers) {\n    try {\n        const body = await request.json();\n        const clientIP = request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown';\n        // レート制限チェック\n        if (!(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.checkRateLimit)(`login:${clientIP}`, 5, 15 * 60 * 1000)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'ログイン試行回数が上限に達しました。15分後に再試行してください。'\n            }, {\n                status: 429,\n                headers\n            });\n        }\n        // バリデーション\n        const validatedData = loginSchema.parse(body);\n        const email = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.sanitizeInput)(validatedData.email.toLowerCase());\n        const password = validatedData.password;\n        // ユーザー検索\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                email\n            },\n            select: {\n                id: true,\n                email: true,\n                passwordHash: true,\n                firstName: true,\n                lastName: true,\n                preferredLanguage: true,\n                avatarUrl: true,\n                isActive: true,\n                emailVerified: true\n            }\n        });\n        if (!user || !user.isActive) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'メールアドレスまたはパスワードが正しくありません'\n            }, {\n                status: 401,\n                headers\n            });\n        }\n        // パスワード検証\n        const isValidPassword = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)(password, user.passwordHash);\n        if (!isValidPassword) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'メールアドレスまたはパスワードが正しくありません'\n            }, {\n                status: 401,\n                headers\n            });\n        }\n        // JWTトークン生成\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.generateToken)({\n            userId: user.id,\n            email: user.email\n        });\n        // 最終ログイン時刻を更新\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.update({\n            where: {\n                id: user.id\n            },\n            data: {\n                lastLoginAt: new Date()\n            }\n        });\n        // レスポンス作成\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                user: {\n                    id: user.id,\n                    email: user.email,\n                    firstName: user.firstName,\n                    lastName: user.lastName,\n                    preferredLanguage: user.preferredLanguage,\n                    avatarUrl: user.avatarUrl\n                },\n                token\n            },\n            message: 'ログインに成功しました'\n        }, {\n            headers\n        });\n        // HTTPOnlyクッキーにトークンを設定\n        response.cookies.set('auth-token', token, {\n            httpOnly: true,\n            secure: \"development\" === 'production',\n            sameSite: 'strict',\n            maxAge: 7 * 24 * 60 * 60 // 7日間\n        });\n        return response;\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.errors[0].message\n            }, {\n                status: 400,\n                headers\n            });\n        }\n        throw error;\n    }\n}\n// 登録処理\nasync function handleRegister(request, headers) {\n    try {\n        const body = await request.json();\n        const clientIP = request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown';\n        // レート制限チェック\n        if (!(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.checkRateLimit)(`register:${clientIP}`, 3, 60 * 60 * 1000)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '登録試行回数が上限に達しました。1時間後に再試行してください。'\n            }, {\n                status: 429,\n                headers\n            });\n        }\n        // バリデーション\n        const validatedData = registerSchema.parse(body);\n        const email = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.sanitizeInput)(validatedData.email.toLowerCase());\n        const password = validatedData.password;\n        const firstName = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.sanitizeInput)(validatedData.firstName);\n        const lastName = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.sanitizeInput)(validatedData.lastName);\n        const preferredLanguage = validatedData.preferredLanguage || 'ja';\n        // パスワード強度チェック\n        const passwordValidation = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.isValidPassword)(password);\n        if (!passwordValidation.valid) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: passwordValidation.message\n            }, {\n                status: 400,\n                headers\n            });\n        }\n        // 既存ユーザーチェック\n        const existingUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'このメールアドレスは既に登録されています'\n            }, {\n                status: 409,\n                headers\n            });\n        }\n        // パスワードハッシュ化\n        const passwordHash = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.hashPassword)(password);\n        // ユーザー作成\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n            data: {\n                email,\n                passwordHash,\n                firstName,\n                lastName,\n                preferredLanguage\n            },\n            select: {\n                id: true,\n                email: true,\n                firstName: true,\n                lastName: true,\n                preferredLanguage: true,\n                avatarUrl: true\n            }\n        });\n        // JWTトークン生成\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.generateToken)({\n            userId: user.id,\n            email: user.email\n        });\n        // レスポンス作成\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                user,\n                token\n            },\n            message: 'アカウントが正常に作成されました'\n        }, {\n            headers\n        });\n        // HTTPOnlyクッキーにトークンを設定\n        response.cookies.set('auth-token', token, {\n            httpOnly: true,\n            secure: \"development\" === 'production',\n            sameSite: 'strict',\n            maxAge: 7 * 24 * 60 * 60 // 7日間\n        });\n        return response;\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.errors[0].message\n            }, {\n                status: 400,\n                headers\n            });\n        }\n        throw error;\n    }\n}\n// ログアウト処理\nasync function handleLogout(request, headers) {\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        message: 'ログアウトしました'\n    }, {\n        headers\n    });\n    // クッキーを削除\n    response.cookies.delete('auth-token');\n    return response;\n}\n// 現在のユーザー情報取得\nasync function GET(request) {\n    try {\n        const headers = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getSecurityHeaders)();\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getAuthenticatedUser)(request);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '認証が必要です'\n            }, {\n                status: 401,\n                headers\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                user\n            }\n        }, {\n            headers\n        });\n    } catch (error) {\n        console.error('Get user error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'サーバーエラーが発生しました'\n        }, {\n            status: 500,\n            headers: (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getSecurityHeaders)()\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUFLUDtZQUFRO1FBRTNCO1FBRUEsT0FBTzlCLHFEQUFZQSxDQUFDa0MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RxQixNQUFNO2dCQUFFWjtZQUFLO1FBQ2YsR0FBRztZQUFFZDtRQUFRO0lBQ2YsRUFBRSxPQUFPTSxPQUFPO1FBQ2RFLFFBQVFGLEtBQUssQ0FBQyxtQkFBbUJBO1FBQ2pDLE9BQU9wQyxxREFBWUEsQ0FBQ2tDLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQWlCLEdBQzFDO1lBQUVDLFFBQVE7WUFBS1AsU0FBU3BCLDZEQUFrQkE7UUFBRztJQUVqRDtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHRodXl0aWVuLm5ndXllbi5TWVNURU0tRVhFXFxEZXNrdG9wXFwwNzAyXFx2aWV0bmFtZXNlLWVjb21tZXJjZVxcc3JjXFxhcHBcXGFwaVxcYXV0aFxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXHJcbmltcG9ydCB7IFxyXG4gIGhhc2hQYXNzd29yZCwgXHJcbiAgdmVyaWZ5UGFzc3dvcmQsIFxyXG4gIGdlbmVyYXRlVG9rZW4sIFxyXG4gIGdldEF1dGhlbnRpY2F0ZWRVc2VyLFxyXG4gIHNhbml0aXplSW5wdXQsXHJcbiAgaXNWYWxpZEVtYWlsLFxyXG4gIGlzVmFsaWRQYXNzd29yZCxcclxuICBjaGVja1JhdGVMaW1pdCxcclxuICBnZXRTZWN1cml0eUhlYWRlcnNcclxufSBmcm9tICdAL2xpYi9hdXRoJ1xyXG5cclxuLy8g44OQ44Oq44OH44O844K344On44Oz44K544Kt44O844OeXHJcbmNvbnN0IGxvZ2luU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCfmnInlirnjgarjg6Hjg7zjg6vjgqLjg4njg6zjgrnjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnKSxcclxuICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oMSwgJ+ODkeOCueODr+ODvOODieOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCcpXHJcbn0pXHJcblxyXG5jb25zdCByZWdpc3RlclNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgn5pyJ5Yq544Gq44Oh44O844Or44Ki44OJ44Os44K544KS5YWl5Yqb44GX44Gm44GP44Gg44GV44GEJyksXHJcbiAgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDgsICfjg5Hjgrnjg6/jg7zjg4njga845paH5a2X5Lul5LiK44Gn44GC44KL5b+F6KaB44GM44GC44KK44G+44GZJyksXHJcbiAgZmlyc3ROYW1lOiB6LnN0cmluZygpLm1pbigxLCAn5ZCN5YmN44KS5YWl5Yqb44GX44Gm44GP44Gg44GV44GEJyksXHJcbiAgbGFzdE5hbWU6IHouc3RyaW5nKCkubWluKDEsICflp5PjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnKSxcclxuICBwcmVmZXJyZWRMYW5ndWFnZTogei5lbnVtKFsnamEnLCAndmknXSkub3B0aW9uYWwoKVxyXG59KVxyXG5cclxuLy8g44Ot44Kw44Kk44OzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCBhY3Rpb24gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnYWN0aW9uJylcclxuXHJcbiAgICAvLyDjgrvjgq3jg6Xjg6rjg4bjgqPjg5jjg4Pjg4Djg7zjgpLoqK3lrppcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRTZWN1cml0eUhlYWRlcnMoKVxyXG5cclxuICAgIGlmIChhY3Rpb24gPT09ICdsb2dpbicpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZUxvZ2luKHJlcXVlc3QsIGhlYWRlcnMpXHJcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3JlZ2lzdGVyJykge1xyXG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlUmVnaXN0ZXIocmVxdWVzdCwgaGVhZGVycylcclxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnbG9nb3V0Jykge1xyXG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlTG9nb3V0KHJlcXVlc3QsIGhlYWRlcnMpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfnhKHlirnjgarjgqLjgq/jgrfjg6fjg7PjgafjgZknIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCwgaGVhZGVycyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQXV0aCBBUEkgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn44K144O844OQ44O844Ko44Op44O844GM55m655Sf44GX44G+44GX44GfJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwLCBoZWFkZXJzOiBnZXRTZWN1cml0eUhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG4vLyDjg63jgrDjgqTjg7Plh6bnkIZcclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9naW4ocmVxdWVzdDogTmV4dFJlcXVlc3QsIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCBjbGllbnRJUCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpIHx8ICd1bmtub3duJ1xyXG5cclxuICAgIC8vIOODrOODvOODiOWItumZkOODgeOCp+ODg+OCr1xyXG4gICAgaWYgKCFjaGVja1JhdGVMaW1pdChgbG9naW46JHtjbGllbnRJUH1gLCA1LCAxNSAqIDYwICogMTAwMCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn44Ot44Kw44Kk44Oz6Kmm6KGM5Zue5pWw44GM5LiK6ZmQ44Gr6YGU44GX44G+44GX44Gf44CCMTXliIblvozjgavlho3oqabooYzjgZfjgabjgY/jgaDjgZXjgYTjgIInIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyOSwgaGVhZGVycyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDjg5Djg6rjg4fjg7zjgrfjg6fjg7NcclxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBsb2dpblNjaGVtYS5wYXJzZShib2R5KVxyXG4gICAgY29uc3QgZW1haWwgPSBzYW5pdGl6ZUlucHV0KHZhbGlkYXRlZERhdGEuZW1haWwudG9Mb3dlckNhc2UoKSlcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gdmFsaWRhdGVkRGF0YS5wYXNzd29yZFxyXG5cclxuICAgIC8vIOODpuODvOOCtuODvOaknOe0olxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBlbWFpbCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBwYXNzd29yZEhhc2g6IHRydWUsXHJcbiAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIGxhc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIHByZWZlcnJlZExhbmd1YWdlOiB0cnVlLFxyXG4gICAgICAgIGF2YXRhclVybDogdHJ1ZSxcclxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCF1c2VyIHx8ICF1c2VyLmlzQWN0aXZlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+ODoeODvOODq+OCouODieODrOOCueOBvuOBn+OBr+ODkeOCueODr+ODvOODieOBjOato+OBl+OBj+OBguOCiuOBvuOBm+OCkycgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxLCBoZWFkZXJzIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOODkeOCueODr+ODvOODieaknOiovFxyXG4gICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRIYXNoKVxyXG4gICAgaWYgKCFpc1ZhbGlkUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn44Oh44O844Or44Ki44OJ44Os44K544G+44Gf44Gv44OR44K544Ov44O844OJ44GM5q2j44GX44GP44GC44KK44G+44Gb44KTJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEsIGhlYWRlcnMgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSldU44OI44O844Kv44Oz55Sf5oiQXHJcbiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oe1xyXG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOacgOe1guODreOCsOOCpOODs+aZguWIu+OCkuabtOaWsFxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcclxuICAgICAgZGF0YTogeyBsYXN0TG9naW5BdDogbmV3IERhdGUoKSB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOODrOOCueODneODs+OCueS9nOaIkFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgcHJlZmVycmVkTGFuZ3VhZ2U6IHVzZXIucHJlZmVycmVkTGFuZ3VhZ2UsXHJcbiAgICAgICAgICBhdmF0YXJVcmw6IHVzZXIuYXZhdGFyVXJsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlblxyXG4gICAgICB9LFxyXG4gICAgICBtZXNzYWdlOiAn44Ot44Kw44Kk44Oz44Gr5oiQ5Yqf44GX44G+44GX44GfJ1xyXG4gICAgfSwgeyBoZWFkZXJzIH0pXHJcblxyXG4gICAgLy8gSFRUUE9ubHnjgq/jg4Pjgq3jg7zjgavjg4jjg7zjgq/jg7PjgpLoqK3lrppcclxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCdhdXRoLXRva2VuJywgdG9rZW4sIHtcclxuICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgc2FtZVNpdGU6ICdzdHJpY3QnLFxyXG4gICAgICBtYXhBZ2U6IDcgKiAyNCAqIDYwICogNjAgLy8gN+aXpemWk1xyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2VcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLmVycm9yc1swXS5tZXNzYWdlIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCwgaGVhZGVycyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIHRocm93IGVycm9yXHJcbiAgfVxyXG59XHJcblxyXG4vLyDnmbvpjLLlh6bnkIZcclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVnaXN0ZXIocmVxdWVzdDogTmV4dFJlcXVlc3QsIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCBjbGllbnRJUCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpIHx8ICd1bmtub3duJ1xyXG5cclxuICAgIC8vIOODrOODvOODiOWItumZkOODgeOCp+ODg+OCr1xyXG4gICAgaWYgKCFjaGVja1JhdGVMaW1pdChgcmVnaXN0ZXI6JHtjbGllbnRJUH1gLCAzLCA2MCAqIDYwICogMTAwMCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn55m76Yyy6Kmm6KGM5Zue5pWw44GM5LiK6ZmQ44Gr6YGU44GX44G+44GX44Gf44CCMeaZgumWk+W+jOOBq+WGjeippuihjOOBl+OBpuOBj+OBoOOBleOBhOOAgicgfSxcclxuICAgICAgICB7IHN0YXR1czogNDI5LCBoZWFkZXJzIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOODkOODquODh+ODvOOCt+ODp+ODs1xyXG4gICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IHJlZ2lzdGVyU2NoZW1hLnBhcnNlKGJvZHkpXHJcbiAgICBjb25zdCBlbWFpbCA9IHNhbml0aXplSW5wdXQodmFsaWRhdGVkRGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgY29uc3QgcGFzc3dvcmQgPSB2YWxpZGF0ZWREYXRhLnBhc3N3b3JkXHJcbiAgICBjb25zdCBmaXJzdE5hbWUgPSBzYW5pdGl6ZUlucHV0KHZhbGlkYXRlZERhdGEuZmlyc3ROYW1lKVxyXG4gICAgY29uc3QgbGFzdE5hbWUgPSBzYW5pdGl6ZUlucHV0KHZhbGlkYXRlZERhdGEubGFzdE5hbWUpXHJcbiAgICBjb25zdCBwcmVmZXJyZWRMYW5ndWFnZSA9IHZhbGlkYXRlZERhdGEucHJlZmVycmVkTGFuZ3VhZ2UgfHwgJ2phJ1xyXG5cclxuICAgIC8vIOODkeOCueODr+ODvOODieW8t+W6puODgeOCp+ODg+OCr1xyXG4gICAgY29uc3QgcGFzc3dvcmRWYWxpZGF0aW9uID0gaXNWYWxpZFBhc3N3b3JkKHBhc3N3b3JkKVxyXG4gICAgaWYgKCFwYXNzd29yZFZhbGlkYXRpb24udmFsaWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBwYXNzd29yZFZhbGlkYXRpb24ubWVzc2FnZSB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAsIGhlYWRlcnMgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pei5a2Y44Om44O844K244O844OB44Kn44OD44KvXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgZW1haWwgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+OBk+OBruODoeODvOODq+OCouODieODrOOCueOBr+aXouOBq+eZu+mMsuOBleOCjOOBpuOBhOOBvuOBmScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA5LCBoZWFkZXJzIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOODkeOCueODr+ODvOODieODj+ODg+OCt+ODpeWMllxyXG4gICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxyXG5cclxuICAgIC8vIOODpuODvOOCtuODvOS9nOaIkFxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZEhhc2gsXHJcbiAgICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3ROYW1lLFxyXG4gICAgICAgIHByZWZlcnJlZExhbmd1YWdlXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBwcmVmZXJyZWRMYW5ndWFnZTogdHJ1ZSxcclxuICAgICAgICBhdmF0YXJVcmw6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBKV1Tjg4jjg7zjgq/jg7PnlJ/miJBcclxuICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVUb2tlbih7XHJcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWxcclxuICAgIH0pXHJcblxyXG4gICAgLy8g44Os44K544Od44Oz44K55L2c5oiQXHJcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHVzZXIsXHJcbiAgICAgICAgdG9rZW5cclxuICAgICAgfSxcclxuICAgICAgbWVzc2FnZTogJ+OCouOCq+OCpuODs+ODiOOBjOato+W4uOOBq+S9nOaIkOOBleOCjOOBvuOBl+OBnydcclxuICAgIH0sIHsgaGVhZGVycyB9KVxyXG5cclxuICAgIC8vIEhUVFBPbmx544Kv44OD44Kt44O844Gr44OI44O844Kv44Oz44KS6Kit5a6aXHJcbiAgICByZXNwb25zZS5jb29raWVzLnNldCgnYXV0aC10b2tlbicsIHRva2VuLCB7XHJcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICAgIHNhbWVTaXRlOiAnc3RyaWN0JyxcclxuICAgICAgbWF4QWdlOiA3ICogMjQgKiA2MCAqIDYwIC8vIDfml6XplpNcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5lcnJvcnNbMF0ubWVzc2FnZSB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAsIGhlYWRlcnMgfVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxyXG5cclxuLy8g44Ot44Kw44Ki44Km44OI5Yem55CGXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxvZ291dChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgc3VjY2VzczogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6ICfjg63jgrDjgqLjgqbjg4jjgZfjgb7jgZfjgZ8nXHJcbiAgfSwgeyBoZWFkZXJzIH0pXHJcblxyXG4gIC8vIOOCr+ODg+OCreODvOOCkuWJiumZpFxyXG4gIHJlc3BvbnNlLmNvb2tpZXMuZGVsZXRlKCdhdXRoLXRva2VuJylcclxuXHJcbiAgcmV0dXJuIHJlc3BvbnNlXHJcbn1cclxuXHJcbi8vIOePvuWcqOOBruODpuODvOOCtuODvOaDheWgseWPluW+l1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRTZWN1cml0eUhlYWRlcnMoKVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKHJlcXVlc3QpXHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+iqjeiovOOBjOW/heimgeOBp+OBmScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxLCBoZWFkZXJzIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHsgdXNlciB9XHJcbiAgICB9LCB7IGhlYWRlcnMgfSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR2V0IHVzZXIgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn44K144O844OQ44O844Ko44Op44O844GM55m655Sf44GX44G+44GX44GfJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwLCBoZWFkZXJzOiBnZXRTZWN1cml0eUhlYWRlcnMoKSB9XHJcbiAgICApXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInoiLCJwcmlzbWEiLCJoYXNoUGFzc3dvcmQiLCJ2ZXJpZnlQYXNzd29yZCIsImdlbmVyYXRlVG9rZW4iLCJnZXRBdXRoZW50aWNhdGVkVXNlciIsInNhbml0aXplSW5wdXQiLCJpc1ZhbGlkUGFzc3dvcmQiLCJjaGVja1JhdGVMaW1pdCIsImdldFNlY3VyaXR5SGVhZGVycyIsImxvZ2luU2NoZW1hIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJwYXNzd29yZCIsIm1pbiIsInJlZ2lzdGVyU2NoZW1hIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJwcmVmZXJyZWRMYW5ndWFnZSIsImVudW0iLCJvcHRpb25hbCIsIlBPU1QiLCJyZXF1ZXN0IiwidXJsIiwiVVJMIiwiYWN0aW9uIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiaGVhZGVycyIsImhhbmRsZUxvZ2luIiwiaGFuZGxlUmVnaXN0ZXIiLCJoYW5kbGVMb2dvdXQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiY29uc29sZSIsImJvZHkiLCJjbGllbnRJUCIsInZhbGlkYXRlZERhdGEiLCJwYXJzZSIsInRvTG93ZXJDYXNlIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsImlkIiwicGFzc3dvcmRIYXNoIiwiYXZhdGFyVXJsIiwiaXNBY3RpdmUiLCJlbWFpbFZlcmlmaWVkIiwidG9rZW4iLCJ1c2VySWQiLCJ1cGRhdGUiLCJkYXRhIiwibGFzdExvZ2luQXQiLCJEYXRlIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwiY29va2llcyIsInNldCIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsInNhbWVTaXRlIiwibWF4QWdlIiwiWm9kRXJyb3IiLCJlcnJvcnMiLCJwYXNzd29yZFZhbGlkYXRpb24iLCJ2YWxpZCIsImV4aXN0aW5nVXNlciIsImNyZWF0ZSIsImRlbGV0ZSIsIkdFVCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getAuthenticatedAdmin: () => (/* binding */ getAuthenticatedAdmin),\n/* harmony export */   getAuthenticatedUser: () => (/* binding */ getAuthenticatedUser),\n/* harmony export */   getSecurityHeaders: () => (/* binding */ getSecurityHeaders),\n/* harmony export */   getTokenFromRequest: () => (/* binding */ getTokenFromRequest),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail),\n/* harmony export */   isValidPassword: () => (/* binding */ isValidPassword),\n/* harmony export */   sanitizeInput: () => (/* binding */ sanitizeInput),\n/* harmony export */   verifyAdminAuth: () => (/* binding */ verifyAdminAuth),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'fallback-secret-key';\nconst JWT_EXPIRES_IN = '7d';\n// パスワードハッシュ化\nasync function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, saltRounds);\n}\n// パスワード検証\nasync function verifyPassword(password, hashedPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n}\n// JWTトークン生成\nfunction generateToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\n// JWTトークン検証\nfunction verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        return {\n            userId: decoded.userId,\n            email: decoded.email,\n            role: decoded.role\n        };\n    } catch (error) {\n        return null;\n    }\n}\n// リクエストからトークンを取得\nfunction getTokenFromRequest(request) {\n    // Authorization ヘッダーから取得\n    const authHeader = request.headers.get('authorization');\n    if (authHeader && authHeader.startsWith('Bearer ')) {\n        return authHeader.substring(7);\n    }\n    // Cookieから取得\n    const token = request.cookies.get('auth-token')?.value;\n    return token || null;\n}\n// 認証されたユーザー情報を取得\nasync function getAuthenticatedUser(request) {\n    const token = getTokenFromRequest(request);\n    if (!token) return null;\n    const decoded = verifyToken(token);\n    if (!decoded) return null;\n    try {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                id: decoded.userId\n            },\n            select: {\n                id: true,\n                email: true,\n                firstName: true,\n                lastName: true,\n                preferredLanguage: true,\n                avatarUrl: true,\n                isActive: true\n            }\n        });\n        if (!user || !user.isActive) return null;\n        return {\n            id: user.id,\n            email: user.email,\n            firstName: user.firstName,\n            lastName: user.lastName,\n            preferredLanguage: user.preferredLanguage,\n            avatarUrl: user.avatarUrl\n        };\n    } catch (error) {\n        console.error('Error fetching authenticated user:', error);\n        return null;\n    }\n}\n// 認証チェック（成功/失敗の結果を返す）\nasync function verifyAuth(request) {\n    try {\n        const user = await getAuthenticatedUser(request);\n        if (!user) {\n            return {\n                success: false,\n                error: '認証が必要です'\n            };\n        }\n        return {\n            success: true,\n            user\n        };\n    } catch (error) {\n        console.error('Auth verification error:', error);\n        return {\n            success: false,\n            error: '認証エラーが発生しました'\n        };\n    }\n}\n// 管理者認証チェック\nasync function verifyAdminAuth(request) {\n    try {\n        const admin = await getAuthenticatedAdmin(request);\n        if (!admin) {\n            return {\n                success: false,\n                error: '管理者認証が必要です'\n            };\n        }\n        return {\n            success: true,\n            admin\n        };\n    } catch (error) {\n        console.error('Admin auth verification error:', error);\n        return {\n            success: false,\n            error: '管理者認証エラーが発生しました'\n        };\n    }\n}\n// 管理者認証\nasync function getAuthenticatedAdmin(request) {\n    const token = getTokenFromRequest(request);\n    if (!token) return null;\n    const decoded = verifyToken(token);\n    if (!decoded || decoded.role !== 'admin') return null;\n    try {\n        const admin = await _prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.admin.findUnique({\n            where: {\n                id: decoded.userId\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true,\n                permissions: true,\n                isActive: true\n            }\n        });\n        if (!admin || !admin.isActive) return null;\n        return admin;\n    } catch (error) {\n        console.error('Error fetching authenticated admin:', error);\n        return null;\n    }\n}\n// 入力値のサニタイゼーション\nfunction sanitizeInput(input) {\n    return input.trim().replace(/[<>]/g, '');\n}\n// メールアドレスの検証\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n// パスワード強度の検証\nfunction isValidPassword(password) {\n    if (password.length < 8) {\n        return {\n            valid: false,\n            message: 'パスワードは8文字以上である必要があります'\n        };\n    }\n    if (!/(?=.*[a-z])/.test(password)) {\n        return {\n            valid: false,\n            message: 'パスワードには小文字を含める必要があります'\n        };\n    }\n    if (!/(?=.*[A-Z])/.test(password)) {\n        return {\n            valid: false,\n            message: 'パスワードには大文字を含める必要があります'\n        };\n    }\n    if (!/(?=.*\\d)/.test(password)) {\n        return {\n            valid: false,\n            message: 'パスワードには数字を含める必要があります'\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// レート制限チェック（簡易版）\nconst rateLimitMap = new Map();\nfunction checkRateLimit(identifier, maxAttempts = 5, windowMs = 15 * 60 * 1000) {\n    const now = Date.now();\n    const record = rateLimitMap.get(identifier);\n    if (!record || now > record.resetTime) {\n        rateLimitMap.set(identifier, {\n            count: 1,\n            resetTime: now + windowMs\n        });\n        return true;\n    }\n    if (record.count >= maxAttempts) {\n        return false;\n    }\n    record.count++;\n    return true;\n}\n// セキュリティヘッダーの設定\nfunction getSecurityHeaders() {\n    return {\n        'X-Content-Type-Options': 'nosniff',\n        'X-Frame-Options': 'DENY',\n        'X-XSS-Protection': '1; mode=block',\n        'Referrer-Policy': 'strict-origin-when-cross-origin',\n        'Content-Security-Policy': \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:;\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztRQUNMLDBCQUEwQjtRQUMxQixtQkFBbUI7UUFDbkIsb0JBQW9CO1FBQ3BCLG1CQUFtQjtRQUNuQiwyQkFBMkI7SUFDN0I7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aHV5dGllbi5uZ3V5ZW4uU1lTVEVNLUVYRVxcRGVza3RvcFxcMDcwMlxcdmlldG5hbWVzZS1lY29tbWVyY2VcXHNyY1xcbGliXFxhdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnXHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJ1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcclxuaW1wb3J0IHsgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzJ1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ2ZhbGxiYWNrLXNlY3JldC1rZXknXHJcbmNvbnN0IEpXVF9FWFBJUkVTX0lOID0gJzdkJ1xyXG5cclxuLy8g44OR44K544Ov44O844OJ44OP44OD44K344Ol5YyWXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEyXHJcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKVxyXG59XHJcblxyXG4vLyDjg5Hjgrnjg6/jg7zjg4nmpJzoqLxcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKVxyXG59XHJcblxyXG4vLyBKV1Tjg4jjg7zjgq/jg7PnlJ/miJBcclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW4ocGF5bG9hZDogeyB1c2VySWQ6IHN0cmluZzsgZW1haWw6IHN0cmluZzsgcm9sZT86IHN0cmluZyB9KTogc3RyaW5nIHtcclxuICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46IEpXVF9FWFBJUkVTX0lOIH0pXHJcbn1cclxuXHJcbi8vIEpXVOODiOODvOOCr+ODs+aknOiovFxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IHsgdXNlcklkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmc7IHJvbGU/OiBzdHJpbmcgfSB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgYW55XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VySWQ6IGRlY29kZWQudXNlcklkLFxyXG4gICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbCxcclxuICAgICAgcm9sZTogZGVjb2RlZC5yb2xlXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vLyDjg6rjgq/jgqjjgrnjg4jjgYvjgonjg4jjg7zjgq/jg7PjgpLlj5blvpdcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRva2VuRnJvbVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcclxuICAvLyBBdXRob3JpemF0aW9uIOODmOODg+ODgOODvOOBi+OCieWPluW+l1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJylcclxuICBpZiAoYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgcmV0dXJuIGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpXHJcbiAgfVxyXG5cclxuICAvLyBDb29raWXjgYvjgonlj5blvpdcclxuICBjb25zdCB0b2tlbiA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2F1dGgtdG9rZW4nKT8udmFsdWVcclxuICByZXR1cm4gdG9rZW4gfHwgbnVsbFxyXG59XHJcblxyXG4vLyDoqo3oqLzjgZXjgozjgZ/jg6bjg7zjgrbjg7zmg4XloLHjgpLlj5blvpdcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRVc2VyKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxBdXRoVXNlciB8IG51bGw+IHtcclxuICBjb25zdCB0b2tlbiA9IGdldFRva2VuRnJvbVJlcXVlc3QocmVxdWVzdClcclxuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxyXG5cclxuICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4pXHJcbiAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbFxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC51c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIGxhc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIHByZWZlcnJlZExhbmd1YWdlOiB0cnVlLFxyXG4gICAgICAgIGF2YXRhclVybDogdHJ1ZSxcclxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkgcmV0dXJuIG51bGxcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogdXNlci5pZCxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXHJcbiAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICBwcmVmZXJyZWRMYW5ndWFnZTogdXNlci5wcmVmZXJyZWRMYW5ndWFnZSxcclxuICAgICAgYXZhdGFyVXJsOiB1c2VyLmF2YXRhclVybFxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhdXRoZW50aWNhdGVkIHVzZXI6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuLy8g6KqN6Ki844OB44Kn44OD44Kv77yI5oiQ5YqfL+WkseaVl+OBrue1kOaenOOCkui/lOOBme+8iVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB1c2VyPzogQXV0aFVzZXI7IGVycm9yPzogc3RyaW5nIH0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKHJlcXVlc3QpXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn6KqN6Ki844GM5b+F6KaB44Gn44GZJyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQXV0aCB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfoqo3oqLzjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ8nIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOeuoeeQhuiAheiqjeiovOODgeOCp+ODg+OCr1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QWRtaW5BdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFkbWluPzogYW55OyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZEFkbWluKHJlcXVlc3QpXHJcbiAgICBpZiAoIWFkbWluKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+euoeeQhuiAheiqjeiovOOBjOW/heimgeOBp+OBmScgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYWRtaW4gfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBZG1pbiBhdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+euoeeQhuiAheiqjeiovOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnycgfVxyXG4gIH1cclxufVxyXG5cclxuLy8g566h55CG6ICF6KqN6Ki8XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkQWRtaW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCB0b2tlbiA9IGdldFRva2VuRnJvbVJlcXVlc3QocmVxdWVzdClcclxuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxyXG5cclxuICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4pXHJcbiAgaWYgKCFkZWNvZGVkIHx8IGRlY29kZWQucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIG51bGxcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgcHJpc21hLmFkbWluLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC51c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgIHBlcm1pc3Npb25zOiB0cnVlLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFhZG1pbiB8fCAhYWRtaW4uaXNBY3RpdmUpIHJldHVybiBudWxsXHJcblxyXG4gICAgcmV0dXJuIGFkbWluXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGF1dGhlbnRpY2F0ZWQgYWRtaW46JywgZXJyb3IpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuLy8g5YWl5Yqb5YCk44Gu44K144OL44K/44Kk44K844O844K344On44OzXHJcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUlucHV0KGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBpbnB1dC50cmltKCkucmVwbGFjZSgvWzw+XS9nLCAnJylcclxufVxyXG5cclxuLy8g44Oh44O844Or44Ki44OJ44Os44K544Gu5qSc6Ki8XHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkRW1haWwoZW1haWw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskL1xyXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QoZW1haWwpXHJcbn1cclxuXHJcbi8vIOODkeOCueODr+ODvOODieW8t+W6puOBruaknOiovFxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiB7IHZhbGlkOiBib29sZWFuOyBtZXNzYWdlPzogc3RyaW5nIH0ge1xyXG4gIGlmIChwYXNzd29yZC5sZW5ndGggPCA4KSB7XHJcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6ICfjg5Hjgrnjg6/jg7zjg4njga845paH5a2X5Lul5LiK44Gn44GC44KL5b+F6KaB44GM44GC44KK44G+44GZJyB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmICghLyg/PS4qW2Etel0pLy50ZXN0KHBhc3N3b3JkKSkge1xyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAn44OR44K544Ov44O844OJ44Gr44Gv5bCP5paH5a2X44KS5ZCr44KB44KL5b+F6KaB44GM44GC44KK44G+44GZJyB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmICghLyg/PS4qW0EtWl0pLy50ZXN0KHBhc3N3b3JkKSkge1xyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAn44OR44K544Ov44O844OJ44Gr44Gv5aSn5paH5a2X44KS5ZCr44KB44KL5b+F6KaB44GM44GC44KK44G+44GZJyB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmICghLyg/PS4qXFxkKS8udGVzdChwYXNzd29yZCkpIHtcclxuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogJ+ODkeOCueODr+ODvOODieOBq+OBr+aVsOWtl+OCkuWQq+OCgeOCi+W/heimgeOBjOOBguOCiuOBvuOBmScgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfVxyXG59XHJcblxyXG4vLyDjg6zjg7zjg4jliLbpmZDjg4Hjgqfjg4Pjgq/vvIjnsKHmmJPniYjvvIlcclxuY29uc3QgcmF0ZUxpbWl0TWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfT4oKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmF0ZUxpbWl0KGlkZW50aWZpZXI6IHN0cmluZywgbWF4QXR0ZW1wdHM6IG51bWJlciA9IDUsIHdpbmRvd01zOiBudW1iZXIgPSAxNSAqIDYwICogMTAwMCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcclxuICBjb25zdCByZWNvcmQgPSByYXRlTGltaXRNYXAuZ2V0KGlkZW50aWZpZXIpXHJcblxyXG4gIGlmICghcmVjb3JkIHx8IG5vdyA+IHJlY29yZC5yZXNldFRpbWUpIHtcclxuICAgIHJhdGVMaW1pdE1hcC5zZXQoaWRlbnRpZmllciwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyB9KVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGlmIChyZWNvcmQuY291bnQgPj0gbWF4QXR0ZW1wdHMpIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgcmVjb3JkLmNvdW50KytcclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG4vLyDjgrvjgq3jg6Xjg6rjg4bjgqPjg5jjg4Pjg4Djg7zjga7oqK3lrppcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlY3VyaXR5SGVhZGVycygpIHtcclxuICByZXR1cm4ge1xyXG4gICAgJ1gtQ29udGVudC1UeXBlLU9wdGlvbnMnOiAnbm9zbmlmZicsXHJcbiAgICAnWC1GcmFtZS1PcHRpb25zJzogJ0RFTlknLFxyXG4gICAgJ1gtWFNTLVByb3RlY3Rpb24nOiAnMTsgbW9kZT1ibG9jaycsXHJcbiAgICAnUmVmZXJyZXItUG9saWN5JzogJ3N0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW4nLFxyXG4gICAgJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5JzogXCJkZWZhdWx0LXNyYyAnc2VsZic7IHNjcmlwdC1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJyAndW5zYWZlLWV2YWwnOyBzdHlsZS1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJzsgaW1nLXNyYyAnc2VsZicgZGF0YTogaHR0cHM6OyBmb250LXNyYyAnc2VsZicgZGF0YTo7XCJcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiYmNyeXB0Iiwiand0IiwicHJpc21hIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfRVhQSVJFU19JTiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJwYXlsb2FkIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwidXNlcklkIiwiZW1haWwiLCJyb2xlIiwiZXJyb3IiLCJnZXRUb2tlbkZyb21SZXF1ZXN0IiwicmVxdWVzdCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImNvb2tpZXMiLCJ2YWx1ZSIsImdldEF1dGhlbnRpY2F0ZWRVc2VyIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJwcmVmZXJyZWRMYW5ndWFnZSIsImF2YXRhclVybCIsImlzQWN0aXZlIiwiY29uc29sZSIsInZlcmlmeUF1dGgiLCJzdWNjZXNzIiwidmVyaWZ5QWRtaW5BdXRoIiwiYWRtaW4iLCJnZXRBdXRoZW50aWNhdGVkQWRtaW4iLCJuYW1lIiwicGVybWlzc2lvbnMiLCJzYW5pdGl6ZUlucHV0IiwiaW5wdXQiLCJ0cmltIiwicmVwbGFjZSIsImlzVmFsaWRFbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwiaXNWYWxpZFBhc3N3b3JkIiwibGVuZ3RoIiwidmFsaWQiLCJtZXNzYWdlIiwicmF0ZUxpbWl0TWFwIiwiTWFwIiwiY2hlY2tSYXRlTGltaXQiLCJpZGVudGlmaWVyIiwibWF4QXR0ZW1wdHMiLCJ3aW5kb3dNcyIsIm5vdyIsIkRhdGUiLCJyZWNvcmQiLCJyZXNldFRpbWUiLCJzZXQiLCJjb3VudCIsImdldFNlY3VyaXR5SGVhZGVycyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUFxQyxFQUFFSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGh1eXRpZW4ubmd1eWVuLlNZU1RFTS1FWEVcXERlc2t0b3BcXDA3MDJcXHZpZXRuYW1lc2UtZWNvbW1lcmNlXFxzcmNcXGxpYlxccHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cthuytien.nguyen.SYSTEM-EXE%5CDesktop%5C0702%5Cvietnamese-ecommerce&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();